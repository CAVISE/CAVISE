# CAVISE

## Overview

В этом монорепозитории собраны инструменты, использующиеся в разработке
команды DRL-FL, а также собственно наши наработки - CCCP и другие. 

## Как это работает

**Opencda** и **Artery** - это два отдельных инструмента, которые могут работать 
и разрабатывались отдельно, однако за 2024 & 2023 годы командой DRL&FL был реализован
протокол взаимодействия этих инструментов в рамках базового сценария *realistic_town06_cosim*
и называется он CCCP.

Оба симулятора используют свои модули для совместного взаимодействия, в **Artery** это класс
**CommunicationManager** (часть статической библиотеки comms), который обеспечивает сетевое
взаимодействие с artery в отдельном потоке, синхронизирует запросы от нескольких cav и собирает
с них данные. Он находиться только в одном сценарии - *realistic_town06_cosim*.

В OpenCDA **CommunicationManager** входит в часть CavWorld и по сути является только лишь одной из компонент,
которая отвечает за взаимодействие с **Artery**. Также реализованы методы сериализации и десериализации данных,
отправляемых и получаемых от **Artery**.

Компиляция protobuf в файлы исходного кода входит в рутину компиляции **Artery**.

## Как с этим работать

Локально собирать может понадобиться только **Artery** для корректной работы подсветки синтаксиса.
Для этого нужно выполнить эти команды:

```
source configure.sh
cd artery/
source ./tools/setup/configure.sh
./tools/setup/build.py -b -c --config Debug --link
```

Для запуска всего нужно выполнить:

```
xhost +local:docker
./run.sh
```

Результаты находятся в *simdata*.